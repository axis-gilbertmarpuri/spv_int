<!DOCTYPE html>

<head>
  <link rel="icon" href="#">
  <div style="height: 120px">
  </div>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CSV Download Tool</title>
  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script>
  $( function() {
    $( "#date_from" ).datepicker({ dateFormat: 'yy-mm-dd' });
    $( "#date_to" ).datepicker({ dateFormat: 'yy-mm-dd' });
  } );

  function fillDatePicker() {
    var date = new Date();

    var prevMonthStart = (new Date(date.getFullYear(), date.getMonth()-1,2)).toISOString().split('T')[0];
    var prevMonthEnd = (new Date(date.getFullYear(), date.getMonth())).toISOString().split('T')[0];

    $("#date_from").val(prevMonthStart);
    $("#date_to").val(prevMonthEnd);
  }
  </script>
</head>

<body>
    <div id="inner" style="justify-content:center; display:flex; align-items:center;">
      <div style="border:1px solid black;">
          <form style="width:500px; " action="/downloadplants" method="post">
            <div style="margin:auto; width:300px;">
              <h1 style="margin:auto; text-align:center;">PLANT REPORT</h1>
            </div>
            <br>
            <div style="margin-left:70px; width:300px;">
              <label for="fname">拠点選択：</label>
                <select name="plants" id="plants">
                  <optgroup label="IGI">
                    <?php foreach ($plants as $plant) { ?>
                      <option value="<?= $plant['plant_uri']; ?>"><?= $plant['plant_name'] ?></option>
                    <?php } ?>
                  </optgroup>
                  <optgroup label="IEE">
                    <?php foreach ($plantsNonG as $plant) { ?>
                      <option value="<?= $plant['plant_uri']; ?>"><?= $plant['plant_name'] ?></option>
                    <?php } ?>
                  </optgroup>
                </select>
            </div>
            <br>
            <div style="margin-left:70px; width: 400px;">
              <label>期間選択：</label>
              <input style="vertical-align:middle; width:80px" type="text" id="date_from" name="date_from"> ~ 
              <input style="vertical-align:middle; width:80px" type="text" id="date_to" name="date_to">
              <input style="margin-left:20px; vertical-align:middle; " type="button" value="前月" name="previous" onclick=fillDatePicker()>
            </div>
            <br>
            <div style="margin:auto; text-align:center; width:300px;">
              <input type="submit" alt="wow" value="ダウンロード" name="current">
            </div>
            <br>
          </form>
      </div>
    </div>


</body>

<style>
  #inner {
    /* padding: 50px 0px 60px 170px; */
    /* padding-left: 30px; */
    /* padding-top: 30px; */
    /* padding-bottom: 30px; */
    /* display: table; */
    /* margin: auto; */
  }

  .dropbtn {
    background-color: #3498DB;
    color: white;
    padding: 16px;
    font-size: 16px;
    border: none;
    cursor: pointer;
  }

  /* Dropdown button on hover & focus */
  .dropbtn:hover, .dropbtn:focus {
    background-color: #2980B9;
  }

  /* The container <div> - needed to position the dropdown content */
  .dropdown {
    position: relative;
    display: inline-block;
  }

  /* Dropdown Content (Hidden by Default) */
  .dropdown-content {
    display: none;
    position: absolute;
    background-color: #f1f1f1;
    min-width: 160px;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
    z-index: 1;
  }

  /* Links inside the dropdown */
  .dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: block;
  }

  /* Change color of dropdown links on hover */
  .dropdown-content a:hover {background-color: #ddd}

  /* Show the dropdown menu (use JS to add this class to the .dropdown-content container when the user clicks on the dropdown button) */
  .show {display:block;}

</style>